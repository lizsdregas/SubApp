
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Sub App</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
</head>

<body ng-app="subApp" ng-controller="SubController">
     
    <div class="container">
        <h1>Find a sub for your class or sign up to sub a class.</h1>

        <div class="row">
            <div class="col-md-8 col-sm-10">

                <!-- new sub request wrapper -->
                <div class="new-sub-request">
                    <div class="clearfix">
                        <button class="btn btn-info btn-new-request"
                                ng-class="requestFormVisible ? 'expanded' : ''"
                                ng-click="toggleNewRequestForm()">
                            New Sub Request
                            <span class="glyphicon glyphicon-menu-down"></span>
                            <span class="glyphicon glyphicon-menu-up"></span>
                        </button>
                    </div>

                    <div class="bg-gray"
                         ng-show="requestFormVisible"
                         ng-cloak>
                        <h2>New Sub Request</h2>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tincidunt cursus lectus, a vestibulum nibh vulputate non. Aenean vitae metus vel ante cursus eleifend. Sed egestas ullamcorper egestas.</p>

                        <form name="newRequestForm"
                              ng-submit="newRequestForm.$valid && addRequest(request)"
                              novalidate>
                            <div class="form-group">
                                <label>Teacher's Name</label>
                                <input type="text"
                                       name="teacherName"
                                       ng-model="request.teacherName"
                                       class="form-control" required />
                                <div class="text-danger"
                                     ng-show="newRequestForm.$submitted || newRequestForm.teacherName.$touched">
                                    <div ng-show="newRequestForm.teacherName.$error.required">Tell us your name.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Teacher's Email</label>
                                <input type="text"
                                       name="teacherEmail"
                                       ng-model="request.teacherEmail"
                                       class="form-control" required />
                                <div class="text-danger"
                                     ng-show="newRequestForm.$submitted || newRequestForm.teacherEmail.$touched">
                                    <div ng-show="newRequestForm.teacherEmail.$error.required">Tell us your email.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Class Name</label>
                                <input type="text"
                                       name="className"
                                       ng-model="request.className"
                                       class="form-control" required />
                                <div class="text-danger"
                                     ng-show="newRequestForm.$submitted || newRequestForm.className.$touched">
                                    <div ng-show="newRequestForm.className.$error.required">Tell us your class name.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Class Date</label>
                                <div class="input-group">
                                    <input type="text"
                                           class="form-control"
                                           uib-datepicker-popup="{{format}}"
                                           ng-model="request.datePickerDate"
                                           is-open="popup1.opened"
                                           datepicker-options="dateOptions"
                                           ng-required="true"
                                           close-text="Close" />
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="open1()">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Class Time</label>
                                <uib-timepicker ng-model="mytime"
                                                hour-step="hstep"
                                                minute-step="mstep">
                                </uib-timepicker> 
                            </div>
                            <div class="clearfix">
                                <input class="btn btn-default" type="submit" value="Submit" />
                                <input class="btn" type="button" ng-click="toggleNewRequestForm()" value="Cancel" />
                            </div>
                        </form>

                    </div>
                </div>

                <!-- start sub request list -->
                <h2>Sub Requests</h2>
                <ul class="sub-request-list">
                    <li ng-repeat="request in requests | orderBy: 'date'"
                        ng-class="{{request.fulfilled}} ? 'bs-callout-info' : 'bs-callout-warning'"
                        class="bs-callout">

                        <h4 ng-show="{{request.fulfilled}}">This sub request is fulfilled.</h4>
                        <h4 ng-hide="{{request.fulfilled}}">This class needs a sub.</h4>

                        <div class="class-info">
                            <p>{{request.teacherName}}</p>
                            <p>{{request.teacherEmail}}</p>
                            <p>{{request.className}}</p>
                            <p>{{request.formattedDate}}</p>
                            <p>{{request.time}}</p>
                        </div>

                        <div ng-show="{{request.fulfilled}}">
                            <p>
                                <strong>Sub information:</strong>
                                {{request.subName}} <small><a href="mailto:{{request.subEmail}}" title="Email">email sub</a></small>
                            </p>
                        </div>

                        <div ng-hide="{{request.fulfilled}}">
                            <div class="bg-gray">
                                <div class="row">
                                    <div class="col-md-6 col-sm-8">
                                        <h4>Sub this class</h4>
                                        <p>
                                            <small>By submitting this form you agree to sub this class.</small>
                                        </p>
                                        <form name="subForm"
                                              ng-submit="subForm.$valid && addSub(request)"
                                              novalidate>
                                            <div class="form-group">
                                                <label>Sub Name</label>
                                                <input type="text"
                                                       name="subName"
                                                       ng-model="request.subName"
                                                       class="form-control" required />
                                                <div class="text-danger"
                                                     ng-show="subForm.$submitted || subForm.subName.$touched">
                                                    <div ng-show="subForm.subName.$error.required">Tell us your name.</div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Sub Email</label>
                                                <input type="text"
                                                       name="subEmail"
                                                       ng-model="request.subEmail"
                                                       class="form-control" required />
                                                <div class="text-danger"
                                                     ng-show="subForm.$submitted || subForm.subEmail.$touched">
                                                    <div ng-show="subForm.subEmail.$error.required">Tell us your email.</div>
                                                </div>
                                            </div>
                                            <input class="btn btn-default" type="submit" value="Submit" />
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="clearfix">
                            <div class="btn btn-danger remove-request"
                                 ng-click="requests.$remove(request)">
                                Delete sub request
                            </div>
                        </div>


                    </li>
                </ul>

            </div>
        </div>
    </div>

    <pre style="margin-top:50px;">{{ requests | json }}</pre>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap-tpls.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.2.0/angularfire.min.js"></script>
    <script src="app.js"></script>

</body>

</html>
