<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Sub App</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
</head>

<body ng-app="subApp" ng-controller="MainCtrl">

    <div class="container">
 
        <div class="row">
            <div class="col-sm-8 col-md-10">
                <h1>Find a sub for your class or sign up to sub a class.</h1>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tincidunt cursus lectus, a vestibulum nibh vulputate non. Aenean vitae metus vel ante cursus eleifend. Sed egestas ullamcorper egestas.</p>
            </div>
        </div>

        <div class="loading" ng-hide="dataLoaded">
            <img src="img/loading.gif" alt="Loading this site" class="img-responsive" />
        </div>

        <div ng-show="dataLoaded" ng-cloak>
            <div class="row">
                <div class="col-md-6 col-sm-8">

                    <h3>Active Sub Requests</h3>
                    <ul class="sub-request-list">
                        <li ng-repeat="request in requests | isFutureDate | orderBy: 'date'"
                            ng-class="{{request.fulfilled}} ? 'callout-green' : 'callout-red'"
                            class="bs-callout">

                            <h4 ng-show="{{request.fulfilled}}">This sub request is fulfilled.</h4>
                            <h4 ng-hide="{{request.fulfilled}}">This class needs a sub.</h4>

                            <div class="class-info">
                                <p>{{ request.date | date:'EEE MMM d, y | h:mm a'}}</p>
                                <p>{{request.location}} | {{request.className}}</p>
                                <p>Scheduled teacher: <a href="mailto:{{request.teacherEmail}}" target="_blank">{{request.teacherName}}</a>
                                </p>
                            </div>

                            <div ng-show="{{request.fulfilled}}">
                                <p>
                                    <strong>Sub information:</strong> {{request.subName}} <small>
                                    <a href="mailto:{{request.subEmail}}" title="Email">email sub</a></small>
                                </p>
                            </div>

                            <div ng-hide="{{request.fulfilled}}">
                                <div class="bg-gray">
                                    <div class="row">
                                        <div class="col-md-6 col-sm-8">
                                            <h4>Sub this class</h4>
                                            <p>
                                                <small>By submitting this form you agree to sub this class.</small>
                                            </p>
                                            <form name="subForm" ng-submit="subForm.$valid && addSub(request)" novalidate>
                                                <div class="form-group">
                                                    <label>Sub Name</label>
                                                    <input type="text" name="subName"
                                                          ng-model="request.subName"
                                                          class="form-control" required />
                                                    <div class="text-danger"
                                                        ng-show="subForm.$submitted || subForm.subName.$touched">
                                                        <div ng-show="subForm.subName.$error.required">Tell us your name.</div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label>Sub Email</label>
                                                    <input type="text" name="subEmail"
                                                           ng-model="request.subEmail"
                                                           class="form-control" required />
                                                    <div class="text-danger"
                                                         ng-show="subForm.$submitted || subForm.subEmail.$touched">
                                                        <div ng-show="subForm.subEmail.$error.required">Tell us your email.</div>
                                                    </div>
                                                </div>
                                                <input class="btn btn-default" type="submit" value="Submit" />
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="clearfix">
                                <div class="btn btn-danger remove-request"
                                    ng-click="requests.$remove(request)">
                                    Delete sub request
                                </div>
                            </div>

                        </li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-5 col-sm-4 col-md-offset-1 col-lg-offset-2">
                    <div class="new-sub-request">
                        <button class="btn btn-info btn-lg btn-new-request"
                                ng-click="toggleNewRequestForm()">
                            New Sub Request
                        </button>
                        <div class="bg-gray" ng-show="requestFormVisible" ng-cloak>
                            <h2>New Sub Request</h2>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tincidunt cursus lectus, a vestibulum nibh vulputate non. Aenean vitae metus vel ante cursus eleifend. Sed egestas ullamcorper egestas.</p>

                            <form name="newRequestForm"
                                  ng-submit="newRequestForm.$valid && addRequest(request)" novalidate>
                                <div class="form-group">
                                    <label>Teacher's Name</label>
                                    <input type="text" name="teacherName"
                                           ng-model="request.teacherName"
                                           class="form-control" required />
                                    <div class="text-danger"
                                         ng-show="newRequestForm.$submitted || newRequestForm.teacherName.$touched">
                                        <div ng-show="newRequestForm.teacherName.$error.required">Tell us your name.</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Teacher's Email</label>
                                    <input type="text" name="teacherEmail"
                                           ng-model="request.teacherEmail"
                                           class="form-control" required />
                                    <div class="text-danger"
                                         ng-show="newRequestForm.$submitted || newRequestForm.teacherEmail.$touched">
                                        <div ng-show="newRequestForm.teacherEmail.$error.required">Tell us your email.</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Class Name</label>
                                    <input type="text" name="className"
                                           ng-model="request.className"
                                           class="form-control" required />
                                    <div class="text-danger"
                                         ng-show="newRequestForm.$submitted || newRequestForm.className.$touched">
                                        <div ng-show="newRequestForm.className.$error.required">Tell us your class name.</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Class Location</label>
                                    <select name="classLocation"
                                            ng-model="request.Location"
                                            class="form-control" required>
                                        <option>Riverwest</option>
                                        <option>Lakeview</option>
                                        <option>West Bucktown</option>
                                    </select>
                                    <div class="text-danger"
                                         ng-show="newRequestForm.$submitted || newRequestForm.classLocation.$touched">
                                        <div ng-show="newRequestForm.classLocation.$error.required">Choose a location.</div>
                                    </div>
                                </div>
                                <div ng-controller="DatePickerCtrl"
                                    class="form-group">
                                    <label>Class Date (MM/DD/YY)</label>
                                    <p class="input-group">
                                        <input type="text" class="form-control"
                                        name="date" uib-datepicker-popup="{{format}}"
                                        ng-model="request.datePickerDate"
                                        is-open="datePicker.opened"
                                        datepicker-options="dateOptions"
                                        close-text="Close" required />
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    class="btn btn-default"
                                                    ng-click="openDatePicker()">
                                                <i class="glyphicon glyphicon-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                    <div class="text-danger" ng-show="newRequestForm.$submitted || newRequestForm.date.$touched">
                                        <div ng-show="newRequestForm.date.$error.required">Please enter a valid date(mm/dd/yy).</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Class Time</label>
                                    <p class="select-group">
                                        <select name="classTimeHours" ng-model="request.classTimeHours" class="form-control" required>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option>5</option>
                                            <option>6</option>
                                            <option>7</option>
                                            <option>8</option>
                                            <option>9</option>
                                            <option>10</option>
                                            <option>11</option>
                                            <option>12</option>
                                        </select>
                                        <select name="classTimeMinutes" ng-model="request.classTimeMinutes" class="form-control" required>
                                            <option>00</option>
                                            <option>15</option>
                                            <option>30</option>
                                            <option>45</option>
                                        </select>
                                        <select name="classTimeHours" ng-model="request.classTimeAmPm" class="form-control" required>
                                            <option>am</option>
                                            <option>pm</option>
                                        </select>
                                    </p>
                                    <!-- todo: validate time -->
                                </div>
                                <div class="clearfix">
                                    <input class="btn btn-default" type="submit" value="Submit" />
                                    <input class="btn" type="button"
                                           ng-click="toggleNewRequestForm(); resetNewRequestForm()"
                                           value="Cancel" />
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.3/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap-tpls.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.2.0/angularfire.min.js"></script>
    <script src="app.js"></script>

</body>

</html>
